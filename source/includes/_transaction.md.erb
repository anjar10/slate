# Transaction
## Create Transaction

```http
POST /transaction HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Authorization: Bearer [USER_TOKEN]
Api-key: [API_KEY]
```

### Request
`POST <%= config[:base_url] %>/transaction`


## Get All Tranasctions
This end-point will provide all user's transaction that has been created

```http
GET /transaction HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Authorization: Bearer [USER_TOKEN]
Api-key: [API_KEY]
```

### Request
`GET <%= config[:base_url] %>/user`

```php
<?php
ch = curl_init();
$user_token = '[USER_TOKEN]';
$api_key = '[API_KEY]';

curl_setopt($ch, CURLOPT_URL, "<%= config[:base_url] %>/transaction");
curl_setopt($ch, CURLOPT_HTTPHEADER,
                 array('Content-Type: application/x-www-form-urlencoded',
                       'Authorization: Bearer ' . $user_token,
                       'Api-key:' . $api_key));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);

$response = curl_exec($ch);
$response = json_decode($response, true);

curl_close($ch);
```
```shell
curl "<%= config[:base_url] %>/transaction" \
  -H "Authorization: Bearer [USER_TOKEN]" \
  -H "Api-key: [API_KEY]"
```

### Response
The above request returns JSON structured like this:

```json

{
    "total_data": 85,
    "data_per_page": 20,
    "total_page": 5,
    "page": 1,
    "data": [
        {
            "id": 790,
            "user_id": 23,
            "amount": 10000,
            "status": "PENDING",
            "timestamp": "2017-08-28 14:32:47",
            "bank_code": "bni",
            "account_number": "0437051936",
            "recipient_name": "- FLIPTECH LENTERA INSPIRASI P",
            "sender_bank": "bri",
            "remark": "testing",
            "receipt": "",
            "time_served": "0000-00-00 00:00:00",
            "bundle_id": 0,
            "company_id": 7,
            "recipient_city": 391,
            "created_from": "API",
            "direction": "DOMESTIC_TRANSFER",
            "sender": null,
            "fee": 1500
        },
        {
            "id": 789,
            "user_id": 23,
            "amount": 10000,
            "status": "DONE",
            "timestamp": "2017-08-24 21:21:23",
            "bank_code": "bni",
            "account_number": "0437051936",
            "recipient_name": "- FLIPTECH LENTERA INSPIRASI P",
            "sender_bank": "bri",
            "remark": "test remark",
            "receipt": "https://storage.biznetgiocloud.com/v1/AUTH_GIOOST443831/bukti_transfer/123993_2017-08-04%202017:07:26.jpg",
            "time_served": "2017-08-25 09:11:35",
            "bundle_id": 0,
            "company_id": 7,
            "recipient_city": 391,
            "created_from": "API",
            "direction": "FOREIGN_INBOUND_SPECIAL_TRANSFER",
            "sender": {
                "sender_name": "John Doe",
                "place_of_birth": 391,
                "date_of_birth": "1992-01-01",
                "address": "taman bakokekok di jalan bakokekok 15 no.2 - 230",
                "sender_identity_type": "nat_id",
                "sender_identity_number": "asdas213123",
                "sender_country": 100252,
                "job": "babu"
            },
            "fee": 1000
        }
    ]
}
```

## Get Transaction Detail
This endpoint will provide information of single transaction based on transaction id

```http
GET /transaction/{TRANSACTION_ID} HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Authorization: Bearer [USER_TOKEN]
Api-key: [API_KEY]
```

### Request
`GET <%= config[:base_url] %>/transaction/{TRANSACTION_ID}`

```php
<?php
```

```shell
```

## Confirm Transaction
Use this endpoint to confirm transaction after user transferred the appropriate amount to Flip's bank account.

```http
POST /transaction/{TRANSACTION_ID}/confirm HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Authorization: Bearer [USER_TOKEN]
Api-key: [API_KEY]
```

### Request
`GET <%= config[:base_url] %>/transaction/{TRANSACTION_ID}/confirm`

```php
<?php
$ch = curl_init();
$user_token = '[USER_TOKEN]';
$api_key = '[API_KEY]';

curl_setopt($ch, CURLOPT_URL, "<%= config[:base_url] %>/transaction/" . $transaction_id . "/confirm);
curl_setopt($ch, CURLOPT_HTTPHEADER,
                 array('Content-Type: application/x-www-form-urlencoded',
                       'Authorization: Bearer' . $user_token,
                       'Api-key:' . $api_key));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_POST, TRUE);

$response = curl_exec($ch);
$response = json_decode($response, true);

curl_close($ch);
```
```shell
curl "<%= config[:base_url] %>/transaction/{TRANSACTION_ID}/confirm" \
  -X POST
```

## Cancel Transaction
Use this endpoint to cancel user transaction based on transaction id

```http
POST /transaction/{TRANSACTION_ID}/cancel HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Authorization: Bearer [USER_TOKEN]
Api-key: [API_KEY]
```

### Request
`POST <%= config[:base_url] %>/transaction/{TRANSACTION_ID}/cancel`

```php
<?php
$ch = curl_init();
$user_token = '[USER_TOKEN]';
$api_key = '[API_KEY]';
$transaction_id = 1;

curl_setopt($ch, CURLOPT_URL, "<%= config[:base_url] %>/transaction/" . $transaction_id . "/cancel");
curl_setopt($ch, CURLOPT_HTTPHEADER,
                 array('Content-Type: application/x-www-form-urlencoded',
                       'Authorization: Bearer' . $user_token,
                       'Api-key:' . $api_key));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_HEADER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_POST, TRUE);

$response = curl_exec($ch);
$response = json_decode($response, true);

curl_close($ch);
```
```shell
curl "<%= config[:base_url] %>/transaction/{TRANSACTION_ID}/cancel" \
  -X POST
```

## Upload Receipt
## Update Beneficiary Account
## Inquiry Beneficiary Name